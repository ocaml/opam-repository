opam-version: "2.0"
synopsis: "Low overhead profiling"
maintainer: "Opsian <admin@opsian.com>"
authors:
  "Richard Warburton <richard@opsian.com>, Sadiq Jaffer <sadiq@opsian.com>"
license: "MIT License"
homepage: "https://github.com/Opsian/opsian-ocaml/wiki"
bug-reports: "https://github.com/Opsian/opsian-ocaml/issues"
depends: [
  "dune" {>= "2.7"}
  "ocaml" {>= "4.12.0"}
  # This is technically the right dependency but doesn't exist within tezos' repository
  # "conf-g++"    {build} 
]
flags: [ verbose ]
# for building native deps
depexts: [
  [ "libpthread-stubs0-dev" ] {os-distribution = "ubuntu" }
  [ "libc6-dev" ] {os-distribution = "ubuntu" } # -ldl -lrt
  [ "autoconf" ] {os-distribution = "ubuntu" }
  [ "libtool" ] {os-distribution = "ubuntu" } # libunwind
  [ "liblzma-dev" ] {os-distribution = "ubuntu" }
]
build: ["dune" "build" "--release" "-j" jobs ]
dev-repo: "git://git@github.com/Opsian/opsian-ocaml.git"
url {
  src: "https://github.com/Opsian/opsian-ocaml/archive/0.1.tar.gz"
  checksum: [
    "md5=8145eb5e04c66aaa364c499db8baf92b"
    "sha512=01affd3f16a1b3b6d0aa216e740b01a3c9b175ece4a6fa4d023f4bea88f504cf9a99f3c3fdeedb7d946e5c35054d8c2d599e1a38a1f380b79db440d26af367eb"
  ]
}

