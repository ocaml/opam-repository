opam-version: "2.0"
maintainer: "Léo Andrès <contact@ndrs.fr>"
authors: "Léo Andrès <contact@ndrs.fr>"
homepage: "https://github.com/ocaml/opam-repository"
bug-reports: "https://github.com/ocaml/opam-repository/issues"
license: "MIT"
build: [
  ["which" "rust-lld"] { os-distribution != "homebrew" }
]
depends: [
  "conf-which" {build}
  "conf-rust"
  "conf-llvm"
  "conf-lld"
]
depexts: [
  ["rust-llvm"] { os-family = "alpine" }
  ["rust-llvm"] { os-family = "arch" }
  ["rust-llvm"] { os-distribution = "debian" & os-version >= "13" } # rust-lld is in the rustc package until debian 12 bookworm
  ["rustc" "lld-17"] { os-family = "ubuntu" } # a symlink to rust-lld is provided by the rustc package but it points to a file only provided by lld-17 (and not lld)
  ["rust-llvm"] { os-family = "opensuse" }
  ["rust-llvm"] { os-family = "suse" }
  ["rust-llvm"] { os-distribution = "centos" }
]
x-ci-accept-failures: os-distribution = "freebsd" | os-family = "fedora"
synopsis: "Virtual package relying on an installation of the integration of Rust with LLVM tools"
flags: conf
