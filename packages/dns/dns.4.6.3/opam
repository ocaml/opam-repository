opam-version: "2.0"
maintainer: "team AT robur dot io"
authors: ["Hannes Mehnert <hannes@mehnert.org>"]
homepage: "https://github.com/mirage/ocaml-dns"
doc: "https://mirage.github.io/ocaml-dns/"
dev-repo: "git+https://github.com/mirage/ocaml-dns.git"
bug-reports: "https://github.com/mirage/ocaml-dns/issues"
license: "BSD-2-Clause"

depends: [
  "dune" {>= "1.2.0"}
  "ocaml" {>= "4.07.0"}
  "rresult" "astring" "fmt" "logs" "ptime"
  "domain-name" {>= "0.3.0"}
  "gmap" {>= "0.3.0"}
  "cstruct" {>= "3.2.0"}
  "ipaddr" {>= "3.0.0"}
  "alcotest" {with-test}
  "lru" {>= "0.3.0"}
  "duration" {>= "0.1.2"}
  "metrics"
]
build: [
  ["dune" "subst"] {dev}
  ["dune" "build" "-p" name "-j" jobs]
  ["dune" "runtest" "-p" name "-j" jobs] {with-test}
]

synopsis: "An opinionated Domain Name System (DNS) library"
description: """
ÂµDNS supports most of the domain name system used in the wild.  It adheres to
strict conventions.  Failing early and hard.  It is mostly implemented in the
pure fragment of OCaml (no mutation, isolated IO, no exceptions).

Legacy resource record types are not dealt with, and there is no plan to support
`ISDN`, `MAILA`, `MAILB`, `WKS`, `MB`, `NULL`, `HINFO`, ... .  `AXFR` is only
handled via TCP connections.  The only resource class supported is `IN` (the
Internet).  Truncated hmac in `TSIG` are not supported (always the full length
of the hash algorithm is used).

Please read [the blog article](https://hannes.nqsb.io/Posts/DNS) for a more
detailed overview.
"""
url {
  src:
    "https://github.com/mirage/ocaml-dns/releases/download/v4.6.3/dns-v4.6.3.tbz"
  checksum: [
    "sha256=be69bc317369409fc4dfbab1120ced7510313888105a4d13071b962a07e1fd3c"
    "sha512=32082237c7ae922edc63822fe0f6447fb83b9fb40546a196cda4904078b4129e601b4413c95b7c51e012f27c654324e18619ab8aed53969ff07fded13378c2c6"
  ]
}
