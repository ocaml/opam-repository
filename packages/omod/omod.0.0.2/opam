opam-version: "1.2"
maintainer: "Daniel BÃ¼nzli <daniel.buenzl i@erratique.ch>"
authors: ["The omod programmers"]
homepage: "http://erratique.ch/software/omod"
doc: "http://erratique.ch/software/omod/doc"
license: "ISC"
dev-repo: "http://erratique.ch/repos/omod.git"
bug-reports: "https://github.com/dbuenzli/omod/issues"
tags: [ "org:erratique" "dev" "toplevel" "repl" ]
available: [ ocaml-version >= "4.03.0"]
depends:
[
  "ocamlfind" {build}
  "ocamlbuild" {build}
  "topkg" {build & >= "0.9.1"}
  "cmdliner" {>= "1.0.2"}
]
build:
[[ "ocaml" "pkg/pkg.ml" "build"
           "--dev-pkg" "%{pinned}%"
           "--lib-dir" "%{lib}%" ]
]

# Following is only to deal with
# https://caml.inria.fr/mantis/view.php?id=7808

install:
[
  ["install" "-d" "%{lib}%/ocaml/"]
  ["install" "src/omod.top" "src/omod.nattop" "%{lib}%/ocaml/"]
]

remove:
[[
  "rm" "-f" "%{lib}%/ocaml/omod.top" "%{lib}%/ocaml/omod.nattop"
]]
