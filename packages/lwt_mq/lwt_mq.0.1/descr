In-process message queues over Lwt

Lwt_mq supports block/fail limits, proper reaction on thread cancellation, and queues closing.
