opam-version: "2.0"
maintainer: "Romain Calascibetta <romain.calascibetta@gmail.com>"
authors: "Romain Calascibetta <romain.calascibetta@gmail.com>"
homepage: "https://github.com/dinosaure/esperanto"
bug-reports: "https://github.com/dinosaure/esperanto/issues/"
license: "MIT"
tags: "org:mirage"
dev-repo: "git+https://github.com/dinosaure/esperanto.git"
build: [
  [ "sh" "-c" "./hello2.com" ]
]
synopsis: "Virtual package relying on APE/Cosmopolitan"
description: "This package can only install if we can run an APE/Cosmopolitan binary"
available: [ arch = "x86_64" & (os = "linux" | os = "freebsd" | os = "openbsd") ]
extra-files: [ "hello2.com" "sha512=f94a28c1753ec10f052f642f768d34c3db836e3970069f49306cc972eb1bc4d0c3f234d54c1bc54b826ba2c1c7436f0264cc96b0bada36db7ede0887c6a79a98" ]
flags: conf
post-messages: [ "Your Linux distribution seems to have Mono/Wine and \
binfmt_misc installed. Installing the latter makes it impossible to run \
Cosmopolitan binaries as they are then recognised as Mono/Wine programs. You \
can solve this problem by following this installation \
(https://justine.lol/apeloader/#binfmt_misc) which completes binfmt_misc with \
a description of the Cosmopolitan binaries." {failure & os = "linux"}]
