opam-version: "2.0"
maintainer: "contact@tezos.com"
authors: ["Tezos devteam"]
homepage: "https://www.tezos.com/"
bug-reports: "https://gitlab.com/tezos/tezos/issues"
dev-repo: "git+https://gitlab.com/tezos/tezos.git"
license: "MIT"
depends: [
  "dune" { >= "2.9" }
  "ocaml" { >= "4.12" }
  "tezos-stdlib" { = version }
  "tezos-crypto" { = version }
  "tezos-lwt-result-stdlib" { = version }
  "data-encoding" { >= "0.5.3" & < "0.6" }
  "bls12-381" { >= "3.0.0" & < "3.1.0" }
  "zarith" { >= "1.12" & < "1.13" }
  "zarith_stubs_js"
  "ringo" { = "0.8" }
  "ringo-lwt" { = "0.8" }
  "tezos-base" { = version }
  "tezos-sapling" { = version }
  "tezos-micheline" { = version }
  "tezos-context" { = version }
  "tezos-event-logging" { = version }
  "alcotest-lwt" { with-test & >= "1.5.0" }
  "tezos-test-helpers" { with-test & = version }
  "qcheck-alcotest" { with-test & >= "0.18" }
  "lwt" { with-test & >= "5.4.0" }
]
build: [
  ["rm" "-r" "vendors"]
  ["dune" "build" "-p" name "-j" jobs]
  ["mv" "src/lib_protocol_environment/%{name}%.install" "./"]
  ["dune" "runtest" "-p" name "-j" jobs] {with-test}
]
synopsis: "Interface layer between the protocols and the shell"
available: false
url {
  src: "https://gitlab.com/tezos/tezos/-/archive/v13.0/tezos-v13.0.tar.bz2"
  checksum: [
    "sha256=e9f47a476c7c8fd359f6fb2bd0f2807de1774c96220e51f83e0a9939faf1b5ab"
    "sha512=9d67a2cb737956741b53a5155b743ef611785eb393789cfe8d4d7680e87d097d67b93f489efbdce63ad4c783d0e397ebb1400c46636906ed0debe76de47c5562"
  ]
}
description: "The protocol-environment is a two-sided component sitting between the shell and
the protocols.

On one side, it provides a restricted typing environment to compile the
protocols against. This is a series of modules which replace the standard
library of OCaml. These modules purposefully omit many functionalities, thus
preventing the protocols from, say, directly writing to disk.

On the other side, it provides the shell with specific call-sites in the
protocols. These are the only entry-points into the otherwise black-box
protocols."
