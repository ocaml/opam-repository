opam-version: "2.0"
maintainer: "drupyog@zoho.com"
authors: ["Gabriel Radanne <drupyog@zoho.com>"]
homepage: "https://github.com/Drup/LILiS"
bug-reports: "https://github.com/Drup/LILiS/issues"
dev-repo: "git+https://github.com/Drup/LILiS.git"
doc: "https://drup.github.io/LILiS/0.2/"
license: "MIT"
tags: [ "lsystem" "grammar" "graphics" "logo" ]

build: [
  [
    "ocaml"
    "setup.ml"
    "-configure"
    "--prefix"
    prefix
    "--enable-containers"
    "--%{batteries:enable}%-batteries"
    "--%{cfstream:enable}%-cfstream"
    "--%{core_kernel:enable}%-core-kernel"
    "--%{cairo2:enable}%-cairo" {"%{lablgtk:installed}%"}
    "--%{tyxml:enable}%-tyxml"
    "--%{js_of_ocaml:enable}%-js-of-ocaml"
    "--%{cmdliner:enable}%-executable"
  ]
  ["ocaml" "setup.ml" "-build"]
  ["ocaml" "setup.ml" "-configure" "--enable-tests"] {with-test}
  ["ocaml" "setup.ml" "-build"] {with-test}
  ["ocaml" "setup.ml" "-test"] {with-test}
  ["ocaml" "setup.ml" "-doc"] {with-doc}
]
install: ["ocaml" "setup.ml" "-install"]
remove: [
  ["ocamlfind" "remove" "calc"]
  ["ocamlfind" "remove" "lilis"]
  ["ocamlfind" "remove" "glilis"]
]
depends: [
  "ocaml" {>= "4.01.0"}
  "ocamlfind" {build}
  "cppo" {build & >= "0.9.4"}
  "cppo_ocamlbuild" {build}
  "menhir"
  "containers" {< "0.7"}
  "ocamlbuild" {build}
]
depopts: [
  "batteries"
  "cfstream"
  "core_kernel" {< "v0.13"}
  "cairo2"
  "lablgtk"
  "tyxml"
  "js_of_ocaml"
  "cmdliner"
]
conflicts: [
  "core_kernel" {< "111.13.00"}
  "tyxml" {< "3.0.0"}
  "js_of_ocaml" {< "2.1"}
]

messages: [
  "To build and install the graphical front-end glilis, you should install cairo2 lablgtk and cmdliner"
    {!cairo2:installed | !lablgtk:installed | !cmdliner:installed}
  "To enable the svg output, you should install tyxml" {!tyxml:installed}
]
synopsis: "Library to Interpret Lindenmayer Systems"
description: "A Library to interpret, evaluate and draw L-systems."
flags: light-uninstall
url {
  src: "https://github.com/Drup/LILiS/archive/v0.2.1.tar.gz"
  checksum: "md5=bed47cf7984eaefebca6fcf58f2b5bda"
}
