opam-version: "2.0"
maintainer: "Leonardo Santos <leomendesantos@gmail.com>"
authors: [
  "Petter A. Urkedal <paurkedal@gmail.com>"
  "Gabriel Radanne <drupyog@zoho.com>"
  "Leonardo Santos <leomendesantos@gmail.com>"
]
license: "LGPL-3.0-or-later WITH LGPL-3.0-linking-exception"
homepage: "https://github.com/ahrefs/ppx_mikmatch"
bug-reports: "https://github.com/ahrefs/ppx_mikmatch/issues"
depends: [
  "ocaml" {>= "4.10"}
  "dune" {>= "1.11"}
  "ppxlib" {>= "0.36.0"}
  "re" {>= "1.7.2"}
  "menhir" {>= "20240715"}
  "ounit2" {with-test}
]
build: ["dune" "build" "-p" name "-j" jobs]
dev-repo: "git+https://github.com/ahrefs/ppx_mikmatch.git"
synopsis: "Matching Regular Expressions with OCaml Patterns using Mikmatch's syntax"
description: """
This syntax extension turns
```
match%mikmatch x with
| {| re1 |} -> e1
...
| {| reN |} -> eN
| _ -> e0
```

into suitable invocations to the ocaml-re library. The patterns are plain
strings of the form accepted by Re_pcre, except groups can be bound to
variables using the syntax (... as var). The type of var will be
string if a match is of the groups is guaranteed given a match of the
whole pattern, and string option if the variable is bound to or nested
below an optionally matched group.

Additional extensions:

- `let%mikmatch name = {|re|}` defines reusable patterns for use within `(?U/N<name>)` patterns
- `type name = {%mikmatch| re |}` generates record types with parse/pp functions from patterns
- let destructuring via `let%pcre/mikmatch {| regex |} = s`, where `regex` binds values and `s` is the input string
- `/regex/flags` for providing compiler flags. `i` for caseless, `a` (%pcre) anchored, `u` (%mikmatch) unanchored
- Caseless groups via the `~` operator
- Mixed matching (raw strings supported) via `function | {%mikmatch| ... |} -> ... | "raw string" -> ...`
- Matching guards are supported across all match extensions
"""
url {
  src: "https://github.com/ahrefs/ppx_mikmatch/archive/refs/tags/1.2.tar.gz"
  checksum: [
    "md5=607d525df297c70ec7104d7188d2aa5b"
    "sha512=1f1da92620be9dbf1c7530c7d0bfc92bb736f4189ef97285b24b90bbb8ce24aaa0aa001c268a4029458def31dc972e813d163092caee5dc784f96380f9125618"
  ]
}
