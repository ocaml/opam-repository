Ensure that register typing constraints are respected (again)