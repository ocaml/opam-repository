Fix pr#7259 by implementing switch branch sharing for flambda