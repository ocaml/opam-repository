[WIP] Use a GADT for socket options